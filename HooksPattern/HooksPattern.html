<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hooksæ¨¡å¼ | React Patterns ğŸ¥¶</title>
    <meta name="description" content="Vite & Vue powered static site generator.">
    <link rel="stylesheet" href="/react-patterns/assets/style.d8cc85cb.css">
    <link rel="modulepreload" href="/react-patterns/assets/chunks/AlgoliaSearchBox.19d65f2e.js">
    <link rel="modulepreload" href="/react-patterns/assets/app.ae9771e3.js">
    <link rel="modulepreload" href="/react-patterns/assets/HooksPattern_HooksPattern.md.85a7f597.lean.js">
    
    <meta name="twitter:title" content="Hooksæ¨¡å¼ | React Patterns ğŸ¥¶">
  <meta property="og:title" content="Hooksæ¨¡å¼ | React Patterns ğŸ¥¶">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/react-patterns/" aria-label="React Patterns ğŸ¥¶, back to home" data-v-675d8756 data-v-cc01ef16><!----> React Patterns ğŸ¥¶</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/react-patterns/" data-v-b8818f8c>Start <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>About ME <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer/react-patterns" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/react-patterns/" data-v-b8818f8c>Start <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>About ME <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer/react-patterns" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">å¼€å§‹æ¢ç´¢å‰ç«¯çš„è®¾è®¡æ¨¡å¼ä¹‹æ—…å§ğŸŒˆ</p><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/FactoryPattern/FactoryPattern">å·¥å‚æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/CommandPattern/CommandPattern">å‘½ä»¤æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/CompoundPattern/CompoundPattern">å¤åˆæ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/ContainerPresentationPattern/ContainerPresentationalPattern">å®¹å™¨/æ¼”ç¤ºæ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/FlyweightPattern/FlyweightPattern">è½»é‡çº§æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/HOCPattern/HOCPatten">åŸå‹æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/react-patterns/HooksPattern/HooksPattern">Hooksæ¨¡å¼</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ç®€ä»‹">ç®€ä»‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®ç°">å®ç°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é‡å»º-restructuring">é‡å»º(Restructuring)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¤æ‚æ€§-complexity">å¤æ‚æ€§(Complexity)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hooks">Hooks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#state-hook">State Hook</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#effect-hook">Effect Hook</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#custom-hooks">Custom Hooks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ‰©å±•hooksæŒ‡å¯¼">æ‰©å±•HooksæŒ‡å¯¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æœ‰æ— çŠ¶æ€ç»„ä»¶">æœ‰æ— çŠ¶æ€ç»„ä»¶</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#æ— çŠ¶æ€ç»„ä»¶">æ— çŠ¶æ€ç»„ä»¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æœ‰çŠ¶æ€ç»„ä»¶">æœ‰çŠ¶æ€ç»„ä»¶</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¼˜åŠ¿">ä¼˜åŠ¿</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/CompoundPattern/CompoundPattern">ä¸­ä»‹æ¨¡å¼/ä¸­é—´ä»¶æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/CompoundPattern/CompoundPattern">æ··åˆæ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/ObserverPattern/ObserverPattern">è§‚å¯Ÿè€…æ¨¡å¼ğŸ‘€</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/ProviderPattern/ProviderPattern">æä¾›è€…æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/Proxy/Proxy">ä»£ç†æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/RenderPropsPattern/RenderPropsPattern">æ¸²æŸ“å±æ€§æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/react-patterns/SingletonPattern/SingletonPattern">å•ä¾‹æ¨¡å¼</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="hooksæ¨¡å¼" tabindex="-1">Hooksæ¨¡å¼ <a class="header-anchor" href="#hooksæ¨¡å¼" aria-hidden="true">#</a></h1><blockquote><p>ä½¿ç”¨å‡½æ•°åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç»„ä»¶ä¹‹é—´é‡ç”¨æœ‰çŠ¶æ€é€»è¾‘</p></blockquote><h2 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a></h2><p>React 16.8å¼•å…¥äº†ä¸€ä¸ªå«åšHooksçš„æ–°ç‰¹æ€§ã€‚é’©å­ä½¿å¾—ä½¿ç”¨ReactçŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•æˆä¸ºå¯èƒ½ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ES2015ç±»ç»„ä»¶ã€‚ è™½ç„¶hookä¸ä¸€å®šæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä½†å®ƒåœ¨åº”ç”¨ç¨‹åºè®¾è®¡ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ã€‚è®¸å¤šä¼ ç»Ÿçš„è®¾è®¡æ¨¡å¼éƒ½å¯ä»¥è¢«Hooksæ‰€å–ä»£ã€‚</p><h2 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-hidden="true">#</a></h2><p>åœ¨Reactä¸­å¼•å…¥hookä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ç±»ç»„ä»¶æ¥ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚Reactä¸­å…¸å‹çš„ç±»ç»„ä»¶æ˜¯è¿™æ ·çš„ï¼š</p><p><code>class component</code></p><div class="language-jsx"><pre><code><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> enabled <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">const</span> btnText <span class="token operator">=</span> enabled <span class="token operator">?</span> <span class="token string">&quot;enabled&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;disabled&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">btn enabled-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>enabled<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token operator">!</span>enabled <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹è§class component ä½ ç­‰ä½¿ç”¨es2015çš„classï¼Œäº†è§£thisæ˜¯å•¥ï¼Œä¸ºå•¥éœ€è¦ç»‘å®šä¸€äº›è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ„é€ å‡½æ•°åšäº†ä»€ä¹ˆ,åœ¨Reactä¸­å¼•å…¥hookä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ç±»ç»„ä»¶æ¥ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚Reactä¸­å…¸å‹çš„ç±»ç»„ä»¶æ˜¯è¿™æ ·çš„</p><p><code>class component</code></p><div class="language-jsx"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">/* Adding state and binding custom methods */</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>customMethodOne <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">customMethodOne</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>customMethodTwo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">customMethodTwo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* Lifecycle Methods */</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">}</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

  <span class="token comment">/* Custom methods */</span>
  <span class="token function">customMethodOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
  <span class="token function">customMethodTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é‡å»º-restructuring" tabindex="-1">é‡å»º(Restructuring) <a class="header-anchor" href="#é‡å»º-restructuring" aria-hidden="true">#</a></h2><p>åœ¨å‡ ä¸ªç»„ä»¶ä¹‹é—´å…±äº«ä»£ç çš„å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨æ›´é«˜é˜¶ç»„ä»¶(Higher Order Component)æˆ–Render Propsæ¨¡å¼ã€‚</p><p>å°½ç®¡è¿™ä¸¤ç§æ¨¡å¼éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”æ˜¯ä¸€ç§å¾ˆå¥½çš„å®è·µï¼Œä½†æ˜¯åœ¨ä»¥åæ·»åŠ è¿™äº›æ¨¡å¼éœ€è¦é‡æ–°æ„é€ åº”ç”¨ç¨‹åºã€‚é™¤äº†å¿…é¡»é‡ç»„åº”ç”¨ç¨‹åº(ç»„ä»¶è¶Šå¤§å°±è¶Šæ£˜æ‰‹)ä¹‹å¤–ï¼Œä¸ºäº†åœ¨åµŒå¥—æ›´æ·±çš„ç»„ä»¶ä¹‹é—´å…±äº«ä»£ç è€Œä½¿ç”¨è®¸å¤šåŒ…è£…ç»„ä»¶å¯èƒ½ä¼šå¯¼è‡´æœ€å¥½è¢«ç§°ä¸ºåŒ…è£…åœ°ç‹±çš„æƒ…å†µã€‚æ‰“å¼€ä½ çš„å¼€å‘å·¥å…·å¹¶çœ‹åˆ°ç±»ä¼¼çš„ç»“æ„å¹¶ä¸ç½•è§</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2qet1cxa4j20y60hkdh0.jpg" alt=""></p><p>åŒ…è£…å™¨çš„åœ°ç‹±å¯èƒ½ä¼šä½¿æ‚¨éš¾ä»¥ç†è§£æ•°æ®æ˜¯å¦‚ä½•æµç»æ‚¨çš„åº”ç”¨ç¨‹åºçš„ï¼Œè¿™å¯èƒ½ä¼šä½¿æ‚¨æ›´éš¾å¼„æ¸…æ¥šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿæ„å¤–çš„è¡Œä¸ºã€‚</p><h2 id="å¤æ‚æ€§-complexity" tabindex="-1">å¤æ‚æ€§(Complexity) <a class="header-anchor" href="#å¤æ‚æ€§-complexity" aria-hidden="true">#</a></h2><p>å½“æˆ‘ä»¬å‘ç±»ç»„ä»¶æ·»åŠ æ›´å¤šçš„é€»è¾‘æ—¶ï¼Œç»„ä»¶çš„å¤§å°ä¼šå¿«é€Ÿå¢åŠ ã€‚è¯¥ç»„ä»¶å†…çš„é€»è¾‘å¯èƒ½ä¼šå˜å¾—æ··ä¹±å’Œéç»“æ„åŒ–ï¼Œè¿™ä½¿å¾—å¼€å‘äººå‘˜å¾ˆéš¾ç†è§£åœ¨ç±»ç»„ä»¶ä¸­å“ªäº›åœ°æ–¹ä½¿ç”¨äº†ç‰¹å®šçš„é€»è¾‘ã€‚è¿™ä½¿å¾—è°ƒè¯•å’Œä¼˜åŒ–æ€§èƒ½å˜å¾—æ›´åŠ å›°éš¾ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ä»£ç ä¸­ä¹Ÿéœ€è¦å¤§é‡çš„é‡å¤ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå®ƒä½¿ç”¨äº†Counterç»„ä»¶å’ŒWidthç»„ä»¶ã€‚</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Count <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Count&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Width <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Width&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> count <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> count <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> window<span class="token punctuation">.</span>innerWidth <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span>
          <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span>
          <span class="token attr-name">increment</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span></span>
          <span class="token attr-name">decrement</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>divider<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Width</span></span> <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>width<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°è¿™å°½ç®¡æ˜¯ä¸€ä¸ªå°ç»„ä»¶ï¼Œä½†ç»„ä»¶å†…éƒ¨çš„é€»è¾‘å·²ç»ç›¸å½“å¤æ‚äº†ã€‚è™½ç„¶æŸäº›éƒ¨åˆ†æ˜¯ç‰¹å®šäºè®¡æ•°å™¨é€»è¾‘çš„ï¼Œä½†å…¶ä»–éƒ¨åˆ†æ˜¯ç‰¹å®šäºå®½åº¦é€»è¾‘çš„ã€‚éšç€ç»„ä»¶çš„å¢é•¿ï¼Œåœ¨ç»„ä»¶ä¸­æ„é€ é€»è¾‘ã€åœ¨ç»„ä»¶ä¸­æŸ¥æ‰¾ç›¸å…³é€»è¾‘ä¼šå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1gzi24v0hnkj20sc0r440k.jpg" alt=""></p><h2 id="hooks" tabindex="-1">Hooks <a class="header-anchor" href="#hooks" aria-hidden="true">#</a></h2><p>å¾ˆæ˜æ˜¾ï¼Œç±»ç»„ä»¶åœ¨Reactä¸­å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ã€‚ä¸ºäº†è§£å†³Reactå¼€å‘è€…åœ¨ä½¿ç”¨ç±»ç»„ä»¶æ—¶ä¼šé‡åˆ°çš„å¸¸è§é—®é¢˜ï¼ŒReactå¼•å…¥äº†React Hooksã€‚React Hooksæ˜¯ä½ å¯ä»¥ç”¨æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„å‡½æ•°ã€‚</p><ul><li>åƒå‡½æ•°ç»„ä»¶æ·»åŠ çŠ¶æ€</li><li>ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè€Œä¸éœ€è¦ç¼–å†™å¾ˆå¤šç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li><li>åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç»„ä»¶ä¹‹é—´é‡ç”¨ç›¸åŒçš„æœ‰çŠ¶æ€é€»è¾‘</li></ul><h2 id="state-hook" tabindex="-1">State Hook <a class="header-anchor" href="#state-hook" aria-hidden="true">#</a></h2><blockquote><p>Reactæä¾›äº†ä¸€ä¸ªhookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ç®¡ç†çŠ¶æ€ï¼Œè¢«ç§°ä¸ºuseState</p></blockquote><p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨useStateé’©å­å°†ç±»ç»„ä»¶é‡æ„ä¸ºå‡½æ•°å¼ç»„ä»¶ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸ºInputçš„ç±»ç»„ä»¶ï¼Œå®ƒåªæ˜¯å‘ˆç°ä¸€ä¸ªè¾“å…¥å­—æ®µã€‚æ¯å½“ç”¨æˆ·åœ¨è¾“å…¥å­—æ®µä¸­è¾“å…¥ä»»ä½•å†…å®¹æ—¶ï¼ŒçŠ¶æ€ä¸­çš„è¾“å…¥å€¼éƒ½ä¼šæ›´æ–°ã€‚</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Type something...<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="effect-hook" tabindex="-1">Effect Hook <a class="header-anchor" href="#effect-hook" aria-hidden="true">#</a></h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useStateç»„ä»¶æ¥å¤„ç†åŠŸèƒ½ç»„ä»¶ä¸­çš„çŠ¶æ€ï¼Œä½†ç±»ç»„ä»¶çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å‘ç»„ä»¶ä¸­æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ ä½¿ç”¨useEffecté’©å­ï¼Œæˆ‘ä»¬å¯ä»¥â€œé’©â€åˆ°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚useEffecté’©å­æœ‰æ•ˆåœ°ç»“åˆäº†componentDidMountã€componentDidUpdateå’ŒcomponentWillUnmountç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p><div class="language-jsx"><pre><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>useEffect(()=&gt;{},[input])</code>ï¼Œå½“ç»„ä»¶ç¬¬ä¸€æ¬¡åŠ è½½å®Œæ¯•å’ŒinputçŠ¶æ€æ”¹å˜çš„æ—¶å€™å°±ä¼šå†æ¬¡æ‰§è¡ŒEffect</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The user typed </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>input<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
      <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span></span>
      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Type something...<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="custom-hooks" tabindex="-1">Custom Hooks <a class="header-anchor" href="#custom-hooks" aria-hidden="true">#</a></h2><p>é™¤äº†Reactæä¾›çš„å†…ç½®é’©å­(useState, useEffect, useReducer, useRef, useContext, useMemo, useImperativeHandle, uselayouteeffect, useDebugValue, useCallback)å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è½»æ¾åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰é’©å­ã€‚</p><p>è‡ªå®šä¹‰é’©å­é€šå¸¸useå¼€å¤´ï¼Œè¿™æ˜¯ä¸€ç§çº¦å®šã€‚</p><p><code>useKeyPress.js</code></p><div class="language-jsx"><pre><code><span class="token keyword">function</span> <span class="token function">useKeyPress</span><span class="token punctuation">(</span><span class="token parameter">targetKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>keyPressed<span class="token punctuation">,</span> setKeyPressed<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleDown</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> targetKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setKeyPressed</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleUp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> targetKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setKeyPressed</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> handleDown<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> handleUp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> handleDown<span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> handleUp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> keyPressed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Input.js</code></p><div class="language-jsx"><pre><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useKeyPress <span class="token keyword">from</span> <span class="token string">&quot;./useKeyPress&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pressQ <span class="token operator">=</span> <span class="token function">useKeyPress</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pressW <span class="token operator">=</span> <span class="token function">useKeyPress</span><span class="token punctuation">(</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pressL <span class="token operator">=</span> <span class="token function">useKeyPress</span><span class="token punctuation">(</span><span class="token string">&quot;l&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The user pressed Q!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pressQ<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The user pressed W!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pressW<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The user pressed L!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pressL<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
      <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span></span>
      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Type something...<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­é‡ç”¨useKeyPressé’©å­ï¼Œè€Œä¸æ˜¯å°†æŒ‰é”®é€»è¾‘ä¿å­˜åœ¨Inputç»„ä»¶çš„æœ¬åœ°ï¼Œè€Œä¸å¿…ä¸€éåˆä¸€éåœ°é‡å†™ç›¸åŒçš„é€»è¾‘ã€‚</p><p>Hooksçš„å¦ä¸€ä¸ªå·¨å¤§ä¼˜åŠ¿æ˜¯ï¼Œç¤¾åŒºå¯ä»¥å»ºç«‹å’Œåˆ†äº«hookã€‚æˆ‘ä»¬åªæ˜¯è‡ªå·±ç¼–å†™äº†useKeyPressé’©å­ï¼Œä½†å®é™…ä¸Šæ ¹æœ¬æ²¡æœ‰å¿…è¦!è¿™ä¸ªé’©å­å·²ç»è¢«åˆ«äººæ„å»ºå¥½äº†ï¼Œåªè¦æˆ‘ä»¬å®‰è£…å®ƒå°±å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨!</p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1gziu70tpo5j20ju0hot9a.jpg" alt="image-20220219150905467" style="zoom:50%;"><div class="language-jsx"><pre><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Count <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Count&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Width <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Width&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">useWindowWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>width<span class="token punctuation">,</span> setWidth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;13&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setWidth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> width<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token function">useWindowWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span>
        <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counter<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span>
        <span class="token attr-name">increment</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counter<span class="token punctuation">.</span>increment<span class="token punctuation">}</span></span>
        <span class="token attr-name">decrement</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counter<span class="token punctuation">.</span>decrement<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>divider<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Width</span></span> <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>width<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å°†ä¸Šé¢Appå‡½æ•°çš„é€»è¾‘åˆ†è§£ä¸ºå‡ ä¸ªéƒ¨åˆ†</p><ul><li>useCounter:ä¸€ä¸ªè‡ªå®šä¹‰é’©å­ï¼Œè¿”å›countçš„å½“å‰å€¼ï¼Œä¸€ä¸ªé€’å¢æ–¹æ³•å’Œä¸€ä¸ªé€’å‡æ–¹æ³•ã€‚</li><li>useWindowWidth:ä¸€ä¸ªè¿”å›çª—å£å½“å‰å®½åº¦çš„è‡ªå®šä¹‰é’©å­ã€‚</li><li>App:ä¸€ä¸ªåŠŸèƒ½çš„ã€æœ‰çŠ¶æ€çš„ç»„ä»¶ï¼Œè¿”å›Counterå’ŒWidthç»„ä»¶ã€‚</li></ul><p>é€šè¿‡ä½¿ç”¨React Hooksè€Œä¸æ˜¯ç±»ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†é€»è¾‘åˆ†è§£æˆæ›´å°çš„ã€å¯é‡ç”¨çš„éƒ¨åˆ†ï¼Œä»è€Œå°†é€»è¾‘åˆ†ç¦»å¼€æ¥</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1gziub4gimuj21380m8mzv.jpg" alt=""></p><p>ä½¿ç”¨React Hookså¯ä»¥æ›´æ¸…æ™°åœ°å°†ç»„ä»¶çš„é€»è¾‘åˆ†å‰²æˆå‡ ä¸ªæ›´å°çš„éƒ¨åˆ†ã€‚é‡ç”¨ç›¸åŒçš„æœ‰çŠ¶æ€é€»è¾‘å˜å¾—æ›´</p><p>åŠ å®¹æ˜“ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©ç»„ä»¶æœ‰çŠ¶æ€ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å°†åŠŸèƒ½ç»„ä»¶é‡å†™ä¸ºç±»ç»„ä»¶ã€‚ä¸å†éœ€è¦å¯¹ES2015ç±»æœ‰å……åˆ†çš„äº†è§£ï¼Œæ‹¥æœ‰å¯é‡ç”¨çš„æœ‰çŠ¶æ€é€»è¾‘å¯ä»¥å¢åŠ ç»„ä»¶çš„å¯æµ‹è¯•æ€§ã€çµæ´»æ€§å’Œå¯è¯»æ€§ã€‚</p><h2 id="æ‰©å±•hooksæŒ‡å¯¼" tabindex="-1">æ‰©å±•HooksæŒ‡å¯¼ <a class="header-anchor" href="#æ‰©å±•hooksæŒ‡å¯¼" aria-hidden="true">#</a></h2><p>æ·»åŠ é’©å­</p><p>ä¸å…¶ä»–ç»„ä»¶ä¸€æ ·ï¼Œå½“æ‚¨æƒ³è¦å°†Hooksæ·»åŠ åˆ°æ‚¨æ‰€ç¼–å†™çš„ä»£ç ä¸­æ—¶ï¼Œä¼šä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Hookå‡½æ•°çš„ç®€è¦æ¦‚è¿°:</p><ul><li><code>useState</code> useStateé’©å­ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´æ–°å’Œæ“ä½œå‡½æ•°ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼Œè€Œæ— éœ€å°†å…¶è½¬æ¢ä¸ºç±»ç»„ä»¶ã€‚è¿™ä¸ªé’©å­çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒç®€å•ï¼Œä¸éœ€è¦åƒå…¶ä»–Reacté’©å­é‚£æ ·å¤æ‚ã€‚</li><li><code>useEffect</code>é’©å­ç”¨äºåœ¨å‡½æ•°ç»„ä»¶çš„ä¸»è¦ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¸­è¿è¡Œä»£ç ã€‚å‡½æ•°ç»„ä»¶çš„ä¸»ä½“ä¸å…è®¸çªå˜ã€è®¢é˜…ã€è®¡æ—¶å™¨ã€æ—¥å¿—è®°å½•å’Œå…¶ä»–å‰¯ä½œç”¨ã€‚å¦‚æœå…è®¸è¿™æ ·åšï¼Œå¯èƒ½ä¼šå¯¼è‡´UIä¸­å‡ºç°ä»¤äººå›°æƒ‘çš„é”™è¯¯å’Œä¸ä¸€è‡´æ€§ã€‚useEffecté’©å­å¯ä»¥é˜²æ­¢æ‰€æœ‰è¿™äº›â€œå‰¯ä½œç”¨â€ï¼Œå¹¶å…è®¸UIå¹³ç¨³è¿è¡Œã€‚å®ƒæ˜¯componentDidMountã€componentDidUpdateå’ŒcomponentWillUnmountçš„ç»„åˆï¼Œéƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</li><li><code>useContext</code> useContexté’©å­æ¥å—ä¸€ä¸ªcontextå¯¹è±¡ï¼Œå®ƒæ˜¯Reactè¿”å›çš„å€¼ã€‚åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›è¯¥ä¸Šä¸‹æ–‡çš„å½“å‰ä¸Šä¸‹æ–‡å€¼ã€‚useContext Hookä¹Ÿä¸React Context APIä¸€èµ·å·¥ä½œï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªåº”ç”¨ä¸­å…±äº«æ•°æ®ï¼Œè€Œä¸éœ€è¦å°†ä½ çš„åº”ç”¨é“å…·å‘ä¸‹ä¼ é€’åˆ°å„ä¸ªçº§åˆ«ã€‚</li><li><code>useReducer</code> useReducer Hookæä¾›äº†ä¸€ç§æ›¿ä»£setStateçš„æ–¹æ³•ï¼Œå½“æ‚¨æœ‰å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…å½“ä¸‹ä¸€ä¸ªçŠ¶æ€ä¾èµ–äºå‰ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œè¿™ç§æ–¹æ³•å°¤å…¶å¯å–ã€‚å®ƒé‡‡ç”¨reducerå‡½æ•°å’Œåˆå§‹çŠ¶æ€è¾“å…¥ï¼Œé€šè¿‡æ•°ç»„è§£æ„è¿”å›å½“å‰çŠ¶æ€å’Œè°ƒåº¦å‡½æ•°ä½œä¸ºè¾“å‡ºã€‚useReducerè¿˜ä¼˜åŒ–äº†è§¦å‘æ·±åº¦æ›´æ–°çš„ç»„ä»¶çš„æ€§èƒ½ã€‚<strong>æˆ‘ä¸ªäººè®¤ä¸ºæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œä½ å¯ä»¥ä¸å¿…å°†çŠ¶æ€é€šè¿‡å±æ€§é€ä¼ ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥é€šè¿‡dispatchæ¥åˆ†å‘æ—¶é—´é©±åŠ¨çŠ¶æ€æ›´æ–°</strong></li></ul><h2 id="æœ‰æ— çŠ¶æ€ç»„ä»¶" tabindex="-1">æœ‰æ— çŠ¶æ€ç»„ä»¶ <a class="header-anchor" href="#æœ‰æ— çŠ¶æ€ç»„ä»¶" aria-hidden="true">#</a></h2><h3 id="æ— çŠ¶æ€ç»„ä»¶" tabindex="-1">æ— çŠ¶æ€ç»„ä»¶ <a class="header-anchor" href="#æ— çŠ¶æ€ç»„ä»¶" aria-hidden="true">#</a></h3><p>æ— çŠ¶æ€ç»„ä»¶<code>Stateless Component</code>æ˜¯æœ€åŸºç¡€çš„ç»„ä»¶å½¢å¼ï¼Œç”±äºæ²¡æœ‰çŠ¶æ€çš„å½±å“æ‰€ä»¥å°±æ˜¯çº¯é™æ€å±•ç¤ºçš„ä½œç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå„ç§<code>UI</code>åº“é‡Œä¹Ÿæ˜¯æœ€å¼€å§‹ä¼šå¼€å‘çš„ç»„ä»¶ç±»åˆ«ï¼Œä¾‹å¦‚æŒ‰é’®ã€æ ‡ç­¾ã€è¾“å…¥æ¡†ç­‰ã€‚å…¶çš„åŸºæœ¬ç»„æˆç»“æ„å°±æ˜¯å±æ€§<code>props</code>ä»¥åŠäº‹ä»¶å‡½æ•°è°ƒç”¨ã€‚ç”±äºä¸æ¶‰åŠåˆ°çŠ¶æ€çš„æ›´æ–°ï¼Œæ‰€ä»¥è¿™ç§ç»„ä»¶çš„å¤ç”¨æ€§ä¹Ÿæœ€å¼ºï¼Œæ— çŠ¶æ€ç»„ä»¶ç”±äºæ²¡æœ‰è‡ªå·±çš„<code>state</code>å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆç‡é«˜ã€‚</p><ul><li>åªè´Ÿè´£æ¥æ”¶<code>props</code>æ¸²æŸ“<code>DOM</code>ï¼Œä¸ç»´æŠ¤è‡ªå·±çš„<code>state</code>ã€‚</li><li>ä¸èƒ½è®¿é—®ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</li><li>ä¸éœ€è¦å£°æ˜ç±»ï¼Œå¯ä»¥é¿å…<code>extends</code>æˆ–<code>constructor</code>ä¹‹ç±»çš„ä»£ç ï¼Œè¯­æ³•ä¸Šæ›´åŠ ç®€æ´ã€‚</li><li>ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ä¼ <code>ref</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>React.forwardRef</code>åŒ…è£…åå†ä¼ <code>ref</code>ã€‚</li><li>ä¸éœ€è¦æ˜¾ç¤ºå£°æ˜<code>this</code>å…³é”®å­—ï¼Œåœ¨<code>ES6</code>çš„ç±»å£°æ˜ä¸­å¾€å¾€éœ€è¦å°†å‡½æ•°çš„<code>this</code>å…³é”®å­—ç»‘å®šåˆ°å½“å‰ä½œç”¨åŸŸï¼Œè€Œå› ä¸ºå‡½æ•°å¼å£°æ˜çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†å¼ºåˆ¶ç»‘å®šã€‚</li><li>æ›´å¥½çš„æ€§èƒ½è¡¨ç°ï¼Œå› ä¸ºå‡½æ•°å¼ç»„ä»¶ä¸­å¹¶ä¸éœ€è¦è¿›è¡Œç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ä¸çŠ¶æ€ç®¡ç†ï¼Œå› æ­¤<code>React</code>å¹¶ä¸éœ€è¦è¿›è¡ŒæŸäº›ç‰¹å®šçš„æ£€æŸ¥æˆ–è€…å†…å­˜åˆ†é…ï¼Œä»è€Œä¿è¯äº†æ›´å¥½åœ°æ€§èƒ½è¡¨ç°ã€‚</li></ul><h3 id="æœ‰çŠ¶æ€ç»„ä»¶" tabindex="-1">æœ‰çŠ¶æ€ç»„ä»¶ <a class="header-anchor" href="#æœ‰çŠ¶æ€ç»„ä»¶" aria-hidden="true">#</a></h3><p>æœ‰çŠ¶æ€ç»„ä»¶<code>Stateful Component</code>æ˜¯åœ¨æ— çŠ¶æ€ç»„ä»¶çš„åŸºç¡€ä¸Šï¼Œå¦‚æœç»„ä»¶å†…éƒ¨åŒ…å«çŠ¶æ€<code>state</code>ä¸”çŠ¶æ€éšç€äº‹ä»¶æˆ–è€…å¤–éƒ¨çš„æ¶ˆæ¯è€Œå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œè¿™å°±æ„æˆäº†æœ‰çŠ¶æ€ç»„ä»¶ã€‚æœ‰çŠ¶æ€ç»„ä»¶é€šå¸¸ä¼šå¸¦æœ‰ç”Ÿå‘½å‘¨æœŸ<code>lifecycle</code>ï¼Œç”¨ä»¥åœ¨ä¸åŒçš„æ—¶åˆ»è§¦å‘çŠ¶æ€çš„æ›´æ–°ã€‚è¿™ç§ç»„ä»¶ä¹Ÿæ˜¯é€šå¸¸åœ¨å†™ä¸šåŠ¡é€»è¾‘ä¸­æœ€ç»å¸¸ä½¿ç”¨åˆ°çš„ï¼Œæ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ç»„ä»¶çš„çŠ¶æ€æ•°é‡ä»¥åŠç”Ÿå‘½å‘¨æœŸæœºåˆ¶ä¹Ÿä¸å°½ç›¸åŒã€‚</p><h2 id="ä¼˜åŠ¿" tabindex="-1">ä¼˜åŠ¿ <a class="header-anchor" href="#ä¼˜åŠ¿" aria-hidden="true">#</a></h2><ul><li>hookå…è®¸æ‚¨æ ¹æ®å…³æ³¨ç‚¹å’ŒåŠŸèƒ½è€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸå¯¹ä»£ç è¿›è¡Œåˆ†ç»„ã€‚</li><li>è¿™ä½¿å¾—ä»£ç ä¸ä»…æ›´ç®€æ´ï¼Œè€Œä¸”æ›´çŸ­ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨Reactçš„ä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œä»¥åŠä½¿ç”¨useStateå…³é”®å­—åå®ƒåœ¨Hooksä¸­çš„æ ·å­ã€‚</li><li>å…±äº«éè§†è§‰é€»è¾‘</li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><p class="last-updated" data-v-07c132fc data-v-abce3432><span class="prefix" data-v-abce3432>Last Updated:</span><span class="datetime" data-v-abce3432></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/react-patterns/HOCPattern/HOCPatten" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>åŸå‹æ¨¡å¼</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/react-patterns/CompoundPattern/CompoundPattern" data-v-38ede35f><span class="text" data-v-38ede35f>ä¸­ä»‹æ¨¡å¼/ä¸­é—´ä»¶æ¨¡å¼</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"commandpattern_commandpattern.md\":\"8f165bef\",\"compoundpattern_compoundpattern.md\":\"ffabefa5\",\"containerpresentationpattern_containerpresentationalpattern.md\":\"785c5fdc\",\"factorypattern_factorypattern.md\":\"d501bad8\",\"flyweightpattern_flyweightpattern.md\":\"4d58e897\",\"hocpattern_hocpatten.md\":\"2b3f1f44\",\"hookspattern_hookspattern.md\":\"85a7f597\",\"mediatorpattern_mediatorpattern.md\":\"07e4fe7d\",\"mixinpattern_mixinpattern.md\":\"e28b2a8e\",\"observerpattern_observerpattern.md\":\"18322e0a\",\"prototypepattern_prototypepattern.md\":\"1f464179\",\"providerpattern_providerpattern.md\":\"c6376407\",\"proxy_proxy.md\":\"ead0bf32\",\"renderpropspattern_renderpropspattern.md\":\"4334e8bb\",\"singletonpattern_singletonpattern.md\":\"ac23a959\",\"index.md\":\"c2498ecb\"}")</script>
    <script type="module" async src="/react-patterns/assets/app.ae9771e3.js"></script>
    
  </body>
</html>